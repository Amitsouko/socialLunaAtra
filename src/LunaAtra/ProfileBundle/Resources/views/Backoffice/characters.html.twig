{% extends "ProfileBundle:Backoffice:bolayout.html.twig" %}

{% block backofficeContent %}
{% set user = app.user   %}
<div class="white-box">
    <h1>Characters</h1>
    <p>
        Drag and drop the character if you want to reorder them in your character list in your profile.
    </p>
    <p class="text-right">
        <a class="blue-button" href="{{ path("add-character") }}">Créer un personnage</a>
    </p>
   <div class="panel panel-default">
      {% spaceless %}

        <ul class="list-unstyled character-list-mini list-blog-dashboard sortable-table rankings" data-form="form-reorder">
            <li class="header">
                <span class="demi">Name</span>
                <span class="eighth">Privacy</span>
                <span class="quarter">Game</span>
                <span class="eighth text-right no-underline">Actions</span>
            </li>
        {% for character in app.user.characters %}
            <li class="ranking" id="{{ character.id }}" data-order="{{ character.ordre }}">
                <span class="demi"><a href="{{ path("single-character", {id: character.id}) }}">{{ character.name }}</a></span>
                <span class="eighth">{{character|inlinePrivacy}}</span>
                <span class="quarter">
                    {% if character.game %}
                        {{character.game.name}}
                    {% endif %}
                </span>
                <span class="eighth text-right no-underline">
            <em><a class="no-underline glyphicon glyphicon-pencil" href="{{ path("edit-character", {id: character.id}) }}"></a></em>  - 
            <em><a class="no-underline glyphicon glyphicon-trash" href="{{ path("delete-character", {id: character.id}) }}"></a></em>
            </span>
            </li>
        {% endfor %}
        </ul>
        {% endspaceless %}
        <div class="hidden form-reorder" data-success="form-reorder-success">
            Do you validate this reorder ?
                  <form method="post" action="{{ path("reorder-characters") }}">
                      <input type="submit" value="mettre à jour"/>
                </form>
        </div>
        <div class="hidden form-reorder-success">
            <p>
                Characters reorder succesfuly
            </p>
        </div>
    </div>
</div>
{% endblock backofficeContent %}